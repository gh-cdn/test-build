/*!  The roject developed by chengpeiquan!  */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f14e4aa0"],{"5e53":function(e,t,n){"use strict";var c=n("f3f3"),o=n("c964"),r=(n("96cf"),n("d81d"),n("d0ff")),a=(n("d3b7"),n("159b"),function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return new Promise((function(c){setTimeout((function(){if(t){var n=document.querySelectorAll(e),o=Object(r["a"])(n),a=[];o.forEach((function(e,t){var n="";t<o.length-1&&(n=o[t+1].getAttribute("id")||"");var c=e.innerHTML;a.push({id:e.getAttribute("id")||"",nextPlotId:n,template:c})})),c(a)}else{var i=document.querySelector(e),u={id:i?i.getAttribute("id"):"",nextPlotId:"",template:i?i.innerHTML:""};c(u)}}),n)}))}),i=a,u=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i(".render-canvas-plot",!0);case 2:if(t=e.sent,Array.isArray(t)){e.next=5;break}return e.abrupt("return");case 5:return e.abrupt("return",t.map((function(e){return Object(c["a"])(Object(c["a"])({},e),{},{extraInfo:{autoPlayConfig:{isOpen:!1,animation:"",nextPlotId:"",sceneRange:"",timeout:0},quickDialogueConfigList:[]}})})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t["a"]=u},a32d:function(e,t,n){"use strict";n.r(t);var c=n("f3f3"),o=n("d0ff"),r=n("c964"),a=(n("99af"),n("c740"),n("caad"),n("2532"),n("159b"),n("96cf"),n("7a23")),i=n("5502"),u=n("2ef0"),l=n("88ed"),s=n("5e53");Object(a["pushScopeId"])("data-v-2017a4b4");var p={class:"render-canvas"},d={class:"plot-wrap"};Object(a["popScopeId"])();var f=Object(a["defineComponent"])({expose:[],setup:function(e){var t=Object(a["useContext"])(),n=t.expose,f=Object(a["ref"])(!1),b=Object(i["b"])(),O=Object(a["computed"])((function(){return b.state.chapter.list})),j=Object(a["computed"])((function(){return b.state.editorInfo.canvasnSize})),v=Object(a["reactive"])({url:"/preview/index.html",dom:null,window:null,preset:{screenMode:"landscape",plotList:[]}}),m=Object(a["toRef"])(v,"dom"),k=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["a"])();case 2:v.preset.plotList=e.sent,g();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){f.value=!0,setTimeout((function(){h()}),10)},h=function(){m.value&&(v.window=v.dom.contentWindow,setTimeout((function(){w()}),1e3))},w=function(){var e=Object(u["cloneDeep"])(v.preset);v.window.postMessage(e,"*")},y=function(e,t,n){n||(n={}),x(e,t,n);var c=n,o=c.id,r=e.component,a=e.eventList,i=e.id;e.propValue;if("v-image-options"===r||"v-text-options"===r)return"__APP__.selectOption(window.event, '".concat(JSON.stringify(a),"')");if("v-quick-dialogue"===r)return"__APP__.changeQuickDialogue(window.event, '".concat(i,"', '").concat(o,"')");if(a.length>0){var u=a[0].target;return"__APP__.changePlot('".concat(u,"', '").concat(JSON.stringify(a[0]),"')")}},x=function(e,t,n){var r=n.id,a=e.component,i=e.id,u=e.propValue,l=v.preset.plotList.findIndex((function(e){return e.template.includes(i)}));if(-1!==l&&(function(){var e=[],n=t.componentData;n.forEach((function(t){e=[].concat(Object(o["a"])(e),Object(o["a"])(t.eventList))})),0===e.length&&(v.preset.plotList[l].extraInfo.autoPlayConfig=Object(c["a"])({nextPlotId:r},t.autoPlayConfig)),"v-text-options"!==a&&"v-image-options"!==a||(v.preset.plotList[l].extraInfo.autoPlayConfig=Object(c["a"])({nextPlotId:r},u.autoPlayConfig))}(),"v-quick-dialogue"===a)){var s=Object(c["a"])({id:i},u);v.preset.plotList[l].extraInfo.quickDialogueConfigList.push(s)}};return n({getCanvasData:k}),function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])("div",p,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(Object(a["unref"])(O),(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:e.id,class:"render-canvas-chapter"},[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.plotList,(function(t,n){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:t.id,id:t.id,class:"render-canvas-plot"},[Object(a["createVNode"])("div",d,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(t.componentData,(function(t,c){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:t.id,style:Object(a["unref"])(l["e"])(t,!0),id:t.id,index:String(c),"data-index":c,onclick:y(t,e.plotList[n],e.plotList[n+1]),class:[Object(a["unref"])(l["a"])(t.classList),"shape"]},["v-text"===t.component?(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(t.component),{key:0,class:"component",style:Object(a["unref"])(l["d"])(t),propValue:t.propValue},null,8,["style","propValue"])):(Object(a["openBlock"])(),Object(a["createBlock"])(Object(a["resolveDynamicComponent"])(t.component),{key:1,class:"component",style:Object(a["unref"])(l["d"])(t),propValue:t.propValue},null,8,["style","propValue"]))],14,["id","index","data-index","onclick"])})),128))])],8,["id"])})),128))])})),128))]),f.value?(Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:0,class:"global__system--transparent-mask",onClick:t[1]||(t[1]=function(e){return f.value=!1})},[f.value?(Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:0,class:"preview",style:{width:"".concat(Object(a["unref"])(j).width,"px"),height:"".concat(Object(a["unref"])(j).height,"px")}},[Object(a["createVNode"])("iframe",{ref:m,class:"preview-frame",src:Object(a["unref"])(v).url,frameborder:"0"},null,8,["src"])],4)):Object(a["createCommentVNode"])("",!0)])):Object(a["createCommentVNode"])("",!0)],64)}}});n("bac1");f.__scopeId="data-v-2017a4b4";t["default"]=f},bac1:function(e,t,n){"use strict";n("f524")},f524:function(e,t,n){}}]);