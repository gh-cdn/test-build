/*!  The roject developed by chengpeiquan!  */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-579f3e55","chunk-6f5ff70a"],{2234:function(e,t,n){},"4f26":function(e,t,n){"use strict";n.r(t);n("5704");var a=n("b558"),o=(n("cd17"),n("ed3b")),c=n("7a23"),r=n("5502"),i=n("5b0f"),l=n("2ef0"),u=n("6256"),s=Object(c["defineComponent"])({expose:[],emits:["update-target-plot"],setup:function(e,t){var n=t.emit,s=Object(c["useContext"])(),p=s.expose,d=Object(c["ref"])(!1),f=Object(c["ref"])(-1),v=Object(r["b"])(),b=Object(c["computed"])((function(){return v.state.canvas.plotInfo.id})),m=Object(c["ref"])([]);m.value=Object(l["cloneDeep"])(v.state.chapter.list);var y=function(e){e.isShowPlotList=!e.isShowPlotList},h=function(e){if(e.id===b.value)return u["a"].warning("不可以选择当前剧情，请重新选择其他剧情"),!1;n("update-target-plot",{index:f.value,plot:e}),d.value=!1};return Object(c["watch"])(d,(function(){m.value=Object(l["cloneDeep"])(v.state.chapter.list)})),p({isShowDialog:d,eventIndex:f}),{emit:n,expose:p,isShowDialog:d,eventIndex:f,store:v,curPlotId:b,chapterList:m,toggleChapter:y,selectPlot:h,computed:c["computed"],ref:c["ref"],useContext:c["useContext"],watch:c["watch"],useStore:r["b"],Modal:o["a"],Input:a["a"],CaretDownFilled:i["a"],cloneDeep:l["cloneDeep"],message:u["a"]}}});n("92de");s.__scopeId="data-v-7f9bdfdf";t["default"]=s},"5b0f":function(e,t,n){"use strict";var a=n("7a23"),o={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"},c=o,r=n("b3f0");function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){l(e,t,n[t])}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(e,t){var n=i({},e,t.attrs);return a["createVNode"](r["a"],a["mergeProps"](n,{icon:c}),null)};u.displayName="CaretDownFilled",u.inheritAttrs=!1;t["a"]=u},"92de":function(e,t,n){"use strict";n("2234")},be9c:function(e,t,n){"use strict";var a={fontFamilyList:[{type:"PingFangSC-Regular, PingFang SC, Microsoft YaHei, Helvetica Neue, Arial, HelveticaNeue, Helvetica, BBAlpha Sans, sans-serif",text:"默认"}],styleBtns:[{type:"b",text:"加粗"},{type:"i",text:"斜体"},{type:"u",text:"下划线"},{type:"left",text:"居左"},{type:"center",text:"居中"},{type:"right",text:"居右"}]};t["a"]=a},bf31:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c}));var a=n("0613"),o=function(e,t,n){var o=t.propValue,c=o.style,r="";switch(e){case"b":r=c["fontWeight"],c["fontWeight"]="bold"===r?"normal":"bold";break;case"i":r=c["fontStyle"],c["fontStyle"]="italic"===r?"normal":"italic";break;case"u":r=c["textDecoration"],c["textDecoration"]="underline"===r?"none":"underline";break;case"left":case"center":case"right":c["textAlign"]=e;break;default:c[e]=n.fontStyle[e]}a["a"].commit("canvas/updateComponent",{target:t,newInfo:{type:"propValue",value:o}})},c=function(e,t){var n=!1,a=t.fontStyle,o=a.fontWeight,c=a.fontStyle,r=a.textDecoration,i=a.textAlign;switch(e){case"b":n="bold"===o;break;case"i":n="italic"===c;break;case"u":n="underline"===r;break;case"left":n="left"===i;break;case"center":n="center"===i;break;case"right":n="right"===i;break}return n}},dbd3:function(e,t,n){"use strict";n("d81d");var a=n("d970"),o={typeList:[{type:"plot",text:"剧情事件"}],animationList:a["a"].map((function(e){return{type:e.type,text:e.text}})),actionList:[{type:"click",text:"单击"}]};t["a"]=o},ec2a:function(e,t,n){"use strict";n.r(t);n("438c");var a=n("fbdf"),o=(n("6ba6"),n("5efb")),c=n("c964"),r=(n("5704"),n("b558")),i=(n("2ef0f"),n("9839")),l=(n("96cf"),n("498a"),n("5319"),n("ac1f"),n("4de4"),n("a9e3"),n("a434"),n("7a23")),u=n("5502"),s=n("35c8"),p=n("a878"),d=n("47ce"),f=n("8a0b"),v=n("2ef0"),b=n("2abc"),m=n.n(b),y=n("dbd3"),h=n("be9c"),g=n("1bad"),w=n("c83e"),I=n("4f26"),x=n("6256"),O=n("57b6"),S=n("e6fd"),j=n("88ed"),k=n("bf31"),L=n("b6f1"),C=Object(l["defineComponent"])({expose:[],setup:function(e){var t=i["b"].Option,n=r["a"].TextArea,b=Object(l["ref"])(null),C=Object(u["b"])(),P=Object(l["computed"])((function(){return C.state.canvas.chapterInfo})),D=Object(l["computed"])((function(){return C.state.canvas.plotInfo})),z=Object(l["computed"])((function(){return C.state.property.data.element})),N=Object(l["computed"])((function(){return C.state.canvas.componentData})),A=["样式","事件","交互"],E=Object(l["ref"])(0),F=Object(l["ref"])(0),R=Object(l["reactive"])({isShowRenameInput:!1,newName:"",content:"",width:"0",height:"0",x:"0",y:"0",zIndex:1,opacity:100,opacityStr:"100",fontStyle:{fontFamily:"",fontSize:"",color:"",fontWeight:"",fontStyle:"",textDecoration:"",textAlign:""},animation:{type:"none",delay:"",duration:""},eventList:[]}),V=Object(l["ref"])(!0),T=function(e){var t=e.key;switch(t){case"Escape":R.isShowRenameInput=!1,R.newName=z.value.elementInfo.label;break;case"Enter":if(!R.newName.trim())return x["a"].warning("请输入新的元件名称"),!1;C.commit("canvas/updateComponent",{target:z.value,newInfo:{type:"label",value:R.newName}}),R.isShowRenameInput=!1,R.newName=z.value.elementInfo.label;break}},B=function(){var e=z.value.propValue,t=R.content.replace(/\n/g,"<br>");e.content=t,C.commit("canvas/updateComponent",{target:z.value,newInfo:{type:"propValue",value:e}})},M=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var n,a,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.target,a=n.files[0]||{size:0,type:""},e.next=4,m()(a);case 4:if(o=e.sent,c=o[0].base64,c){e.next=8;break}return e.abrupt("return",!1);case 8:C.commit("canvas/updateComponent",{target:z.value,newInfo:{type:"propValue",value:c}});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){C.commit("canvas/updateComponent",{target:z.value,newInfo:{type:"style",value:{width:R.width,height:R.height}}})},W=function(){C.commit("canvas/updateComponent",{target:z.value,newInfo:{type:"style",value:{top:R.y,left:R.x}}})},Z=function(e){if("v-bg"===z.value.component)return x["a"].warning("背景无法设置层级"),!1;var t=Object(v["cloneDeep"])(N.value).filter((function(e){return e.style.zIndex!==L["a"].bgZIndex})).sort((function(e,t){return e.style.zIndex-t.style.zIndex})),n=t[0].style.zIndex,a=t.length,o=t[a-1].style.zIndex,c=z.value.style.zIndex;switch(e){case"top":if(c>0&&c===o)return!1;z.value.style.zIndex=o+1;break;case"up":if(c>0&&c===o)return!1;z.value.style.zIndex++;break;case"down":if(c<0&&c===o)return!1;z.value.style.zIndex--;break;case"bottom":if(c<0&&c===o)return!1;z.value.style.zIndex=n-1;break}},J=function(e){switch(e){case"slider":R.opacityStr=String(R.opacity);break;case"input":R.opacity=Number(R.opacityStr);break}var t=R.opacity/100;C.commit("canvas/updateComponent",{target:z.value,newInfo:{type:"style",value:{opacity:t}}})},_=function(){var e={id:Object(S["a"])("event"),type:"plot",target:"",targetLabel:"",animation:"none",action:"click",source:{chapterId:P.value.id,plotId:D.value.id,componentId:z.value.id}};0===R.eventList.length&&(R.eventList.push(e),V.value=!1)},K=function(e){C.commit("chapter/updateTreeChild",{type:"remove",childInfo:{target:{chapterId:"",plotId:R.eventList[e].target},source:{chapterId:P.value.id,plotId:D.value.id,componentId:z.value.id,eventId:R.eventList[e].id}}}),R.eventList.splice(e,1),0===R.eventList.length&&(V.value=!0)},U=function(e){b.value.eventIndex=e,b.value.isShowDialog=!0},Y=function(e){var t=e.index,n=e.plot,a=n.chapterId,o=n.id,c=n.title;R.eventList[t].target=o,R.eventList[t].targetLabel=c,C.commit("chapter/updateTreeChild",{type:"add",childInfo:{target:{chapterId:a,plotId:o},source:{chapterId:P.value.id,plotId:D.value.id,componentId:z.value.id,eventId:R.eventList[t].id}}})},q=function(){if(z.value&&"v-normal-dialogue"===z.value.component)try{R.isShowRenameInput=!1,R.newName=z.value.elementInfo.label,R.content=z.value.propValue.content.replace(/<br>/g,"\n"),R.width=Object(O["c"])(z.value.style.width),R.height=Object(O["c"])(z.value.style.height),R.x=String(z.value.style.left)||"0",R.y=String(z.value.style.top)||"0",R.zIndex=parseInt(z.value.style.zIndex),R.opacity=100*Number(z.value.style.opacity),R.opacityStr=100*Number(z.value.style.opacity)+"",R.eventList=z.value.eventList;var e=z.value.propValue.style;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(R.fontStyle[t]="fontSize"===t?Object(O["c"])(e[t]):e[t]);setTimeout((function(){var e=z.value.classList;for(var t in R.animation)Object.prototype.hasOwnProperty.call(R.animation,t)&&(R.animation[t]=Object(j["c"])(t,e))}),10),V.value=0===R.eventList.length}catch(n){}};return Object(l["onMounted"])(q),Object(l["watchEffect"])(q),{Option:t,TextArea:n,selectPlotDialog:b,store:C,curChapter:P,curPlot:D,curElement:z,elementList:N,tabs:A,curTabIndex:E,curZIndex:F,newInfo:R,isShowAddEventBtn:V,doRenameKeyup:T,updateContent:B,getFileInfo:M,updateSize:H,updatePosition:W,setZIndex:Z,updateOpacity:J,addEvent:_,removeEvent:K,showSelectPlotDialog:U,updateTargetPlot:Y,loadElementInfo:q,computed:l["computed"],onMounted:l["onMounted"],reactive:l["reactive"],ref:l["ref"],watchEffect:l["watchEffect"],useStore:u["b"],Input:r["a"],Button:o["a"],Slider:a["a"],Select:i["b"],DownOutlined:s["a"],CloseOutlined:p["a"],PlusOutlined:d["a"],LinkOutlined:f["a"],cloneDeep:v["cloneDeep"],readFile:m.a,eventPreset:y["a"],fontPreset:h["a"],zIndexOptions:g["a"],AnimationPanel:w["default"],SelectPlot:I["default"],message:x["a"],removeUnit:O["c"],generateId:S["a"],getAnimationClassName:j["c"],updateFontStyle:k["b"],isActiveFontStyle:k["a"],config:L["a"]}}});t["default"]=C}}]);