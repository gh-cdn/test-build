/*!  The roject developed by chengpeiquan!  */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15c7d1b3","chunk-6f5ff70a"],{2234:function(e,t,n){},"4f26":function(e,t,n){"use strict";n.r(t);n("5704");var a=n("b558"),o=(n("cd17"),n("ed3b")),c=n("7a23"),r=n("5502"),i=n("5b0f"),u=n("2ef0"),l=n("6256"),s=Object(c["defineComponent"])({expose:[],emits:["update-target-plot"],setup:function(e,t){var n=t.emit,s=Object(c["useContext"])(),p=s.expose,d=Object(c["ref"])(!1),f=Object(c["ref"])(-1),v=Object(r["b"])(),b=Object(c["computed"])((function(){return v.state.canvas.plotInfo.id})),m=Object(c["ref"])([]);m.value=Object(u["cloneDeep"])(v.state.chapter.list);var h=function(e){e.isShowPlotList=!e.isShowPlotList},y=function(e){if(e.id===b.value)return l["a"].warning("不可以选择当前剧情，请重新选择其他剧情"),!1;n("update-target-plot",{index:f.value,plot:e}),d.value=!1};return Object(c["watch"])(d,(function(){m.value=Object(u["cloneDeep"])(v.state.chapter.list)})),p({isShowDialog:d,eventIndex:f}),{emit:n,expose:p,isShowDialog:d,eventIndex:f,store:v,curPlotId:b,chapterList:m,toggleChapter:h,selectPlot:y,computed:c["computed"],ref:c["ref"],useContext:c["useContext"],watch:c["watch"],useStore:r["b"],Modal:o["a"],Input:a["a"],CaretDownFilled:i["a"],cloneDeep:u["cloneDeep"],message:l["a"]}}});n("92de");s.__scopeId="data-v-7f9bdfdf";t["default"]=s},"5b0f":function(e,t,n){"use strict";var a=n("7a23"),o={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"},c=o,r=n("b3f0");function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){u(e,t,n[t])}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(e,t){var n=i({},e,t.attrs);return a["createVNode"](r["a"],a["mergeProps"](n,{icon:c}),null)};l.displayName="CaretDownFilled",l.inheritAttrs=!1;t["a"]=l},"69e8":function(e,t,n){"use strict";n.r(t);n("438c");var a=n("fbdf"),o=(n("6ba6"),n("5efb")),c=(n("5704"),n("b558")),r=n("c964"),i=(n("2ef0f"),n("9839")),u=(n("96cf"),n("498a"),n("caad"),n("2532"),n("4de4"),n("a9e3"),n("a434"),n("7a23")),l=n("5502"),s=n("35c8"),p=n("a878"),d=n("47ce"),f=n("8a0b"),v=n("2ef0"),b=n("2abc"),m=n.n(b),h=n("dbd3"),y=n("1bad"),g=n("c83e"),I=n("4f26"),w=n("6256"),O=n("57b6"),x=n("e6fd"),j=n("e160"),S=n("88ed"),L=n("b6f1"),k=Object(u["defineComponent"])({expose:[],setup:function(e){var t=i["b"].Option,n=Object(u["ref"])(null),b=Object(u["ref"])(!1),k=Object(l["b"])(),P=Object(u["computed"])((function(){return k.state.canvas.chapterInfo})),z=Object(u["computed"])((function(){return k.state.canvas.plotInfo})),C=Object(u["computed"])((function(){return k.state.property.data.element})),D=Object(u["computed"])((function(){return k.state.canvas.componentData})),N=["样式","事件","交互"],E=Object(u["ref"])(0),R=Object(u["ref"])(0),M=Object(u["reactive"])({isShowRenameInput:!1,newName:"",width:"0",height:"0",x:"0",y:"0",zIndex:1,opacity:100,opacityStr:"100",animation:{type:"none",delay:"",duration:""},eventList:[]}),T=Object(u["ref"])(!0),A=function(e){var t=e.key;switch(t){case"Escape":M.isShowRenameInput=!1,M.newName=C.value.elementInfo.label;break;case"Enter":if(!M.newName.trim())return w["a"].warning("请输入新的元件名称"),!1;k.commit("canvas/updateComponent",{target:C.value,newInfo:{type:"label",value:M.newName}}),M.isShowRenameInput=!1,M.newName=C.value.elementInfo.label;break}},F=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,a,o,c,r,i,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.target,b.value=!0,a=n.files[0]||{size:0,type:""},o=a.size,c=a.type,r=["image/png","image/jpeg","image/webp"],r.includes(c)){e.next=10;break}return w["a"].error("请选择jpg、png、webp格式的图片"),n.value="",b.value=!1,e.abrupt("return",!1);case 10:if(!(o>10485760)){e.next=15;break}return w["a"].error("图片大小不能超过10M"),n.value="",b.value=!1,e.abrupt("return",!1);case 15:return e.next=17,Object(j["a"])(a);case 17:if(i=e.sent,i){e.next=24;break}return e.next=21,m()(a);case 21:u=e.sent,l=u[0].base64,i=l;case 24:k.commit("canvas/updateComponent",{target:C.value,newInfo:{type:"propValue",value:i}}),n.value="",b.value=!1;case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){k.commit("canvas/updateComponent",{target:C.value,newInfo:{type:"style",value:{width:M.width,height:M.height}}})},U=function(){k.commit("canvas/updateComponent",{target:C.value,newInfo:{type:"style",value:{top:M.y,left:M.x}}})},Z=function(e){if("v-bg"===C.value.component)return w["a"].warning("背景无法设置层级"),!1;var t=Object(v["cloneDeep"])(D.value).filter((function(e){return e.style.zIndex!==L["a"].bgZIndex})).sort((function(e,t){return e.style.zIndex-t.style.zIndex})),n=t[0].style.zIndex,a=t.length,o=t[a-1].style.zIndex,c=C.value.style.zIndex;switch(e){case"top":if(c>0&&c===o)return!1;C.value.style.zIndex=o+1;break;case"up":if(c>0&&c===o)return!1;C.value.style.zIndex++;break;case"down":if(c<0&&c===o)return!1;C.value.style.zIndex--;break;case"bottom":if(c<0&&c===o)return!1;C.value.style.zIndex=n-1;break}},J=function(e){switch(e){case"slider":M.opacityStr=String(M.opacity);break;case"input":M.opacity=Number(M.opacityStr);break}var t=M.opacity/100;k.commit("canvas/updateComponent",{target:C.value,newInfo:{type:"style",value:{opacity:t}}})},V=function(){var e={id:Object(x["a"])("event"),type:"plot",target:"",targetLabel:"",animation:"none",action:"click",source:{chapterId:P.value.id,plotId:z.value.id,componentId:C.value.id}};0===M.eventList.length&&(M.eventList.push(e),T.value=!1)},_=function(e){k.commit("chapter/updateTreeChild",{type:"remove",childInfo:{target:{chapterId:"",plotId:M.eventList[e].target},source:{chapterId:P.value.id,plotId:z.value.id,componentId:C.value.id,eventId:M.eventList[e].id}}}),M.eventList.splice(e,1),0===M.eventList.length&&(T.value=!0)},H=function(e){n.value.eventIndex=e,n.value.isShowDialog=!0},K=function(e){var t=e.index,n=e.plot,a=n.chapterId,o=n.id,c=n.title;M.eventList[t].target=o,M.eventList[t].targetLabel=c,k.commit("chapter/updateTreeChild",{type:"add",childInfo:{target:{chapterId:a,plotId:o},source:{chapterId:P.value.id,plotId:z.value.id,componentId:C.value.id,eventId:M.eventList[t].id}}})},q=function(){if(C.value)try{M.isShowRenameInput=!1,M.newName=C.value.elementInfo.label,M.width=Object(O["c"])(C.value.style.width),M.height=Object(O["c"])(C.value.style.height),M.x=String(C.value.style.left)||"0",M.y=String(C.value.style.top)||"0",M.zIndex=parseInt(C.value.style.zIndex),M.opacity=100*Number(C.value.style.opacity),M.opacityStr=100*Number(C.value.style.opacity)+"",M.eventList=C.value.eventList,setTimeout((function(){var e=C.value.classList;for(var t in M.animation)Object.prototype.hasOwnProperty.call(M.animation,t)&&(M.animation[t]=Object(S["c"])(t,e))}),10),T.value=0===M.eventList.length}catch(e){}};return Object(u["onMounted"])(q),Object(u["watchEffect"])(q),{Option:t,selectPlotDialog:n,isUploading:b,store:k,curChapter:P,curPlot:z,curElement:C,elementList:D,tabs:N,curTabIndex:E,curZIndex:R,newInfo:M,isShowAddEventBtn:T,doRenameKeyup:A,getFileInfo:F,updateSize:B,updatePosition:U,setZIndex:Z,updateOpacity:J,addEvent:V,removeEvent:_,showSelectPlotDialog:H,updateTargetPlot:K,loadElementInfo:q,computed:u["computed"],onMounted:u["onMounted"],reactive:u["reactive"],ref:u["ref"],watchEffect:u["watchEffect"],useStore:l["b"],Input:c["a"],Button:o["a"],Slider:a["a"],Select:i["b"],DownOutlined:s["a"],CloseOutlined:p["a"],PlusOutlined:d["a"],LinkOutlined:f["a"],cloneDeep:v["cloneDeep"],readFile:m.a,eventPreset:h["a"],zIndexOptions:y["a"],AnimationPanel:g["default"],SelectPlot:I["default"],message:w["a"],removeUnit:O["c"],generateId:x["a"],ossUpload:j["a"],getAnimationClassName:S["c"],config:L["a"]}}});t["default"]=k},"92de":function(e,t,n){"use strict";n("2234")},dbd3:function(e,t,n){"use strict";n("d81d");var a=n("d970"),o={typeList:[{type:"plot",text:"剧情事件"}],animationList:a["a"].map((function(e){return{type:e.type,text:e.text}})),actionList:[{type:"click",text:"单击"}]};t["a"]=o}}]);