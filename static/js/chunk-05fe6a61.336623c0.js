/*!  The roject developed by chengpeiquan!  */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05fe6a61","chunk-c7719fec","chunk-21687e40"],{3929:function(e,t,n){"use strict";n("d6da")},"498a":function(e,t,n){"use strict";var a=n("23e7"),o=n("58a8").trim,c=n("c8d2");a({target:"String",proto:!0,forced:c("trim")},{trim:function(){return o(this)}})},"51c5":function(e,t,n){"use strict";n.r(t);n("4de4"),n("a9e3"),n("159b");var a=n("7a23"),o=n("5502"),c=n("b76a"),r=n.n(c),i=n("2ef0"),u=n("5b0f"),l=n("da63"),s=n("6b50"),f=Object(a["defineComponent"])({expose:[],setup:function(e){var t=Object(o["b"])(),n=Object(a["computed"])((function(){return t.state.chapter.list})),c=Object(a["computed"])((function(){return t.state.canvas.plotInfo.id})),f=Object(a["ref"])([]),d=Object(a["ref"])(null),p=Object(a["ref"])(""),h=function(){p.value?(f.value.length=0,n.value.filter((function(e,t){if(e.plotList.length){var n=Object(i["cloneDeep"])(e);n["fatherIndex"]=t;var a=n.plotList.filter((function(e,t){var n=-1!==e.title.indexOf(p.value);if(n)return e.plotIndex=t,e}));a.length&&(n["plotList"]=a,f.value.push(n))}}))):I()},v=function(e){e.isShowPlotList=!e.isShowPlotList},m=function(e,n){t.commit("canvas/setPlotInfo",{plot:e,chapter:n}),t.commit("canvas/setComponentData",e.componentData),t.commit("property/changePanel",{type:"plot",data:e})},b=function(e){e.stopPropagation(),e.preventDefault(),x(e)},x=function(e){var t=e.target.dataset,n=t.source,a=t.index,o=t.fatherIndex;d.value&&(d.value.itemInfo.source=n,d.value.itemInfo.index=Number(a),d.value.itemInfo.fatherIndex=Number(o),d.value.style.top=e.y,d.value.style.left=e.x,d.value.isShowBtn=!p.value,d.value.isShowDialog=!0)},g=function(){t.commit("chapter/showSetItemDialog",{mode:"addChapter",source:"chapter",title:"新建章节",placeholder:"请输入章节名称",index:-1,fatherIndex:-1})},O=function(e){return!p.value&&(0!==e.draggedContext.index&&0!==e.relatedContext.index&&void 0)},I=function(){p.value="",f.value.length=0,n.value.forEach((function(e,t){var n=Object(i["cloneDeep"])(e);n["fatherIndex"]=t,n.plotList.length&&n.plotList.filter((function(e,t){return e.plotIndex=t})),f.value.push(n)}))};return Object(a["watchEffect"])(I),{store:t,chapterList:n,curPlotId:c,chapterCloneList:f,settingMenu:d,searchValue:p,search:h,toggleChapter:v,loadPlotData:m,handleContextMenu:b,showSettingMenu:x,showSetChapterDialog:g,checkMove:O,initSearchData:I,computed:a["computed"],ref:a["ref"],watchEffect:a["watchEffect"],useStore:o["b"],draggable:r.a,cloneDeep:i["cloneDeep"],CaretDownFilled:u["a"],SettingMenu:l["default"],SetItem:s["default"]}}});n("3929");f.__scopeId="data-v-09656d57";t["default"]=f},"5b0f":function(e,t,n){"use strict";var a=n("7a23"),o={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"},c=o,r=n("b3f0");function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){u(e,t,n[t])}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(e,t){var n=i({},e,t.attrs);return a["createVNode"](r["a"],a["mergeProps"](n,{icon:c}),null)};l.displayName="CaretDownFilled",l.inheritAttrs=!1;t["a"]=l},"6b50":function(e,t,n){"use strict";n.r(t);n("5704");var a=n("b558"),o=(n("cd17"),n("ed3b")),c=(n("498a"),n("7a23")),r=n("5502"),i=n("6256"),u=Object(c["defineComponent"])({expose:[],setup:function(e){var t=Object(r["b"])(),n=Object(c["useContext"])(),u=n.expose,l=Object(c["computed"])((function(){return t.state.chapter.setItemDialog})),s=Object(c["ref"])(null),f=Object(c["ref"])(""),d=function(){if(!f.value.trim())return i["a"].warning(l.value.placeholder),!1;var e=l.value.mode;t.commit("chapter/".concat(e),f.value);var n="renameItem"===e?"修改":"添加";i["a"].success("".concat(n,"成功")),t.commit("chapter/hideSetItemDialog")};return Object(c["watch"])((function(){return l.value.isShow}),(function(){l.value.isShow&&setTimeout((function(){s.value.focus()}),100),l.value.isShow||(f.value="")})),{store:t,expose:u,setItemDialog:l,inputDOM:s,inputValue:f,save:d,computed:c["computed"],reactive:c["reactive"],ref:c["ref"],useContext:c["useContext"],watch:c["watch"],useStore:r["b"],Modal:o["a"],Input:a["a"],message:i["a"]}}});t["default"]=u},7428:function(e,t,n){},"8d40":function(e,t,n){"use strict";n("7428")},c8d2:function(e,t,n){var a=n("d039"),o=n("5899"),c="​᠎";e.exports=function(e){return a((function(){return!!o[e]()||c[e]()!=c||o[e].name!==e}))}},d6da:function(e,t,n){},da63:function(e,t,n){"use strict";n.r(t);n("2a26");var a=n("768f"),o=(n("3b18"),n("f64c")),c=n("7a23"),r=n("5502"),i={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},u=i,l=n("b3f0");function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){f(e,t,n[t])}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e,t){var n=s({},e,t.attrs);return c["createVNode"](l["a"],c["mergeProps"](n,{icon:u}),null)};d.displayName="CaretRightOutlined",d.inheritAttrs=!1;var p=d,h=n("2ef0"),v=Object(c["defineComponent"])({expose:[],setup:function(e){var t=Object(r["b"])(),n=Object(c["useContext"])(),i=n.expose,u=Object(c["ref"])(!1),l=Object(c["reactive"])({top:0,left:0}),s=Object(c["computed"])((function(){return t.state.chapter.list})),f=Object(c["ref"])(null),d=Object(c["ref"])(!1),v=Object(c["reactive"])({source:"",index:-1,fatherIndex:-1}),m=function(e){var n;switch(e){case"before":n=v.index;break;case"after":n=v.index+1;break;default:n=s.value.length}t.commit("chapter/showSetItemDialog",{mode:"addPlot",source:v.source,title:"新建剧情",placeholder:"请输入剧情名称",index:n,fatherIndex:v.fatherIndex}),u.value=!1},b=function(e){var n;switch(e){case"before":n=v.index;break;case"after":n=v.index+1;break;default:n=s.value.length}t.commit("chapter/showSetItemDialog",{mode:"addChapter",source:v.source,title:"新建章节",placeholder:"请输入章节名称",index:n,fatherIndex:-1}),u.value=!1},x=function(){f.value=Object(h["cloneDeep"])(s.value[v.fatherIndex].plotList[v.index]),o["a"].success("复制成功"),u.value=!1},g=function(){f.value?(t.commit("chapter/pastePlot",{data:f.value,fatherIndex:v.fatherIndex,index:v.index}),o["a"].success("粘贴成功"),u.value=!1):u.value=!1},O=function(){0!=v.index&&(t.commit("chapter/moveItem",{type:0,source:v.source,fatherIndex:v.fatherIndex,index:v.index}),u.value=!1)},I=function(){var e="plot"===v.source,n=e?v.index!=s.value[v.fatherIndex].plotList.length-1:v.index!=s.value.length-1;n?(t.commit("chapter/moveItem",{type:1,source:v.source,fatherIndex:v.fatherIndex,index:v.index}),u.value=!1):u.value=!1},w=function(){t.commit("chapter/removeItem",v);var e="chapter"===v.source?"章节":"剧情";o["a"].success("删除".concat(e,"成功")),u.value=!1},j=function(){var e="chapter"===v.source;t.commit("chapter/showSetItemDialog",{mode:"renameItem",title:"修改".concat(e?"章节":"剧情"),placeholder:"请输入".concat(e?"章节":"剧情","名称"),index:v.index,fatherIndex:e?-1:v.fatherIndex}),u.value=!1};return i({isShowDialog:u,style:l,itemInfo:v,isShowBtn:d}),{store:t,expose:i,isShowDialog:u,style:l,chapterList:s,copyData:f,isShowBtn:d,itemInfo:v,addPlot:m,addChapter:b,copy:x,paste:g,clickMoveUp:O,clickMoveDwon:I,deleteItem:w,renameItem:j,computed:c["computed"],reactive:c["reactive"],ref:c["ref"],useContext:c["useContext"],useStore:r["b"],message:o["a"],Popconfirm:a["a"],CaretRightOutlined:p,cloneDeep:h["cloneDeep"]}}});n("8d40");v.__scopeId="data-v-1b4c198c";t["default"]=v}}]);